<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tower of Hanoi</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
        }

        h1 {
            margin: 20px 0;
        }

        #towers {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 400px;
        }

        .tower {
            flex: 1;
            position: relative;
            margin: 0 10px;
            border: 2px solid #000;
            height: 300px;
            display: flex;
            flex-direction: column-reverse;
            justify-content: flex-start;
        }

        .disk {
            margin: 2px auto;
            height: 20px;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
        }

        .controls {
            margin-top: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
        }

        button:disabled {
            background-color: #cccccc;
        }

        button:hover:not(:disabled) {
            background-color: #0056b3;
        }

        #code {
            margin-top: 30px;
            text-align: left;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre-wrap;
            background: #e0e0e0;
            padding: 15px;
            border-radius: 10px;
            display: inline-block;
        }

        label {
            font-size: 16px;
            margin-right: 10px;
        }

        input {
            padding: 5px;
            width: 50px;
            text-align: center;
        }

        #speedControl {
            margin-left: 20px;
        }

        .highlight {
            background-color: #00bfff;
        }

        .green {
            background-color: #32cd32;
        }

        .red {
            background-color: #ff6347;
        }
    </style>
</head>
<body>
    <h1>Tower of Hanoi</h1>
    <div class="controls">
        <label for="diskInput">Number of Disks:</label>
        <input id="diskInput" type="number" min="1" max="10" value="5">
        <label for="speedControl">Animation Speed:</label>
        <input id="speedControl" type="range" min="100" max="2000" value="500">
        <span id="speedValue">500ms</span>
        <button id="startButton">Start</button>
        <button id="pauseButton" disabled>Pause</button>
        <button id="resumeButton" disabled>Resume</button>
        <button id="resetButton" disabled>Reset</button>
    </div>
    <div id="towers">
        <div id="tower1" class="tower"></div>
        <div id="tower2" class="tower"></div>
        <div id="tower3" class="tower"></div>
    </div>

    <div id="code">
        <h2>C Code for Tower of Hanoi</h2>
        <pre>
<span id="line1">#include &lt;stdio.h&gt;</span>
<span id="line2">void towerOfHanoi(int n, char source, char target, char auxiliary) {</span>
<span id="line3">    if (n == 1) {</span>
<span id="line4">        printf("Move disk 1 from %c to %c\\n", source, target);</span>
<span id="line5">        return;</span>
<span id="line6">    }</span>
<span id="line7">    towerOfHanoi(n - 1, source, auxiliary, target);</span>
<span id="line8">    printf("Move disk %d from %c to %c\\n", n, source, target);</span>
<span id="line9">    towerOfHanoi(n - 1, auxiliary, target, source);</span>
<span id="line10">}</span>
<span id="line11">int main() {</span>
<span id="line12">    int n = 3; // Number of disks</span>
<span id="line13">    printf("Solution for %d disks:\\n", n);</span>
<span id="line14">    towerOfHanoi(n, 'A', 'C', 'B');</span>
<span id="line15">    return 0;</span>
<span id="line16">}</span>
        </pre>
    </div>

    <script>
        const towers = [
            document.getElementById("tower1"),
            document.getElementById("tower2"),
            document.getElementById("tower3")
        ];

        let disks = [];
        let numDisks = parseInt(document.getElementById("diskInput").value);
        let moves = [];
        let moveIndex = 0;
        let animationSpeed = parseInt(document.getElementById("speedControl").value);
        let isPaused = false;
        let pauseTimeout = null;

        function highlightCode(lineNumber, result) {
            const line = document.getElementById(`line${lineNumber}`);
            line.classList.remove('highlight', 'green', 'red');
            if (result === null) {
                line.classList.add('highlight');
            } else if (result === true) {
                line.classList.add('green');
            } else if (result === false) {
                line.classList.add('red');
            }
        }

        function createDisks() {
            disks = [];
            towers.forEach(tower => tower.innerHTML = "");
            for (let i = numDisks; i >= 1; i--) {
                const disk = document.createElement("div");
                disk.classList.add("disk");
                disk.style.width = `${i * 20}px`;
                disk.style.backgroundColor = `hsl(${i * 40}, 70%, 50%)`;
                disk.textContent = i; // Add the disk number
                disks.push(disk);
                towers[0].appendChild(disk);
            }
        }

        function solveHanoi(n, source, target, auxiliary) {
            if (n === 0) return;
            highlightCode(3, null); // Line 3: If condition
            solveHanoi(n - 1, source, auxiliary, target);
            moves.push([source, target]);
            highlightCode(8, null); // Line 8: Print move
            solveHanoi(n - 1, auxiliary, target, source);
        }

        function animateMoves() {
            if (isPaused) return;

            if (moveIndex >= moves.length) {
                document.getElementById("startButton").disabled = false;
                document.getElementById("resetButton").disabled = false;
                document.getElementById("pauseButton").disabled = true;
                document.getElementById("resumeButton").disabled = true;
                return;
            }

            const [from, to] = moves[moveIndex];
            const disk = towers[from].lastElementChild;
            towers[to].appendChild(disk);
            moveIndex++;
            pauseTimeout = setTimeout(animateMoves, animationSpeed);
        }

        document.getElementById("startButton").addEventListener("click", () => {
            numDisks = parseInt(document.getElementById("diskInput").value);
            animationSpeed = parseInt(document.getElementById("speedControl").value);
            document.getElementById("speedValue").textContent = `${animationSpeed}ms`;
            document.getElementById("startButton").disabled = true;
            document.getElementById("pauseButton").disabled = false;
            document.getElementById("resumeButton").disabled = true;
            document.getElementById("resetButton").disabled = true;
            moves = [];
            moveIndex = 0;
            solveHanoi(numDisks, 0, 2, 1);
            animateMoves();
        });

        document.getElementById("pauseButton").addEventListener("click", () => {
            isPaused = true;
            clearTimeout(pauseTimeout);
            document.getElementById("pauseButton").disabled = true;
            document.getElementById("resumeButton").disabled = false;
        });

        document.getElementById("resumeButton").addEventListener("click", () => {
            isPaused = false;
            document.getElementById("pauseButton").disabled = false;
            document.getElementById("resumeButton").disabled = true;
            animateMoves();
        });

        document.getElementById("resetButton").addEventListener("click", () => {
            createDisks();
            document.getElementById("startButton").disabled = false;
            document.getElementById("pauseButton").disabled = true;
            document.getElementById("resumeButton").disabled = true;
            document.getElementById("resetButton").disabled = true;
        });

        document.getElementById("diskInput").addEventListener("change", () => {
            numDisks = parseInt(document.getElementById("diskInput").value);
            createDisks();
        });

        document.getElementById("speedControl").addEventListener("input", (event) => {
            animationSpeed = parseInt(event.target.value);
            document.getElementById("speedValue").textContent = `${animationSpeed}ms`;
        });

        createDisks();
    </script>
</body>
</html>
